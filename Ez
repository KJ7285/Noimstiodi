local kijb = {}

local UIS = game:GetService("UserInputService")

function kijb:CreateLibrary(title)
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Parent = game:GetService("CoreGui")
    ScreenGui.ResetOnSpawn = false

    local MainFrame = Instance.new("Frame")
    MainFrame.Parent = ScreenGui
    MainFrame.Size = UDim2.new(0, 400, 0, 300)
    MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
    MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    MainFrame.BorderSizePixel = 0
    MainFrame.Active = true
    MainFrame.Draggable = true
    MainFrame.Visible = true

    local UICorner = Instance.new("UICorner", MainFrame)
    UICorner.CornerRadius = UDim.new(0, 10)

    local UIListLayout = Instance.new("UIListLayout")
    UIListLayout.Parent = MainFrame
    UIListLayout.Padding = UDim.new(0, 5)
    UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder

    local TitleLabel = Instance.new("TextLabel")
    TitleLabel.Parent = MainFrame
    TitleLabel.Size = UDim2.new(1, 0, 0, 40)
    TitleLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleLabel.Text = title
    TitleLabel.Font = Enum.Font.GothamBold
    TitleLabel.TextSize = 18
    TitleLabel.BorderSizePixel = 0

    local Library = {}
    Library.MainFrame = MainFrame

    function Library:ToggleUI()
        MainFrame.Visible = not MainFrame.Visible
    end

    function Library:CreateTab(tabName)
        local Tab = {}
        local TabButton = Instance.new("TextButton")
        TabButton.Parent = MainFrame
        TabButton.Size = UDim2.new(1, 0, 0, 40)
        TabButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.Text = tabName
        TabButton.Font = Enum.Font.GothamBold
        TabButton.TextSize = 16
        TabButton.BorderSizePixel = 0

        local TabFrame = Instance.new("Frame")
        TabFrame.Parent = MainFrame
        TabFrame.Size = UDim2.new(1, 0, 0, 250)
        TabFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        TabFrame.BorderSizePixel = 0
        TabFrame.Visible = false

        TabButton.MouseButton1Click:Connect(function()
            for _, child in pairs(MainFrame:GetChildren()) do
                if child:IsA("Frame") and child ~= MainFrame then
                    child.Visible = false
                end
            end
            TabFrame.Visible = true
        end)

        function Tab:AddButton(text, callback)
            local Button = Instance.new("TextButton")
            Button.Parent = TabFrame
            Button.Size = UDim2.new(1, 0, 0, 40)
            Button.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
            Button.TextColor3 = Color3.fromRGB(255, 255, 255)
            Button.Text = text
            Button.Font = Enum.Font.GothamBold
            Button.TextSize = 16

            Button.MouseButton1Click:Connect(function()
                callback()
            end)
        end

        function Tab:AddSlider(text, min, max, default, callback)
            local SliderFrame = Instance.new("Frame")
            SliderFrame.Parent = TabFrame
            SliderFrame.Size = UDim2.new(1, 0, 0, 40)
            SliderFrame.BackgroundTransparency = 1

            local SliderLabel = Instance.new("TextLabel")
            SliderLabel.Parent = SliderFrame
            SliderLabel.Size = UDim2.new(0.6, 0, 1, 0)
            SliderLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
            SliderLabel.Text = text .. ": " .. default
            SliderLabel.Font = Enum.Font.GothamBold
            SliderLabel.TextSize = 16
            SliderLabel.BackgroundTransparency = 1

            local SliderButton = Instance.new("TextButton")
            SliderButton.Parent = SliderFrame
            SliderButton.Size = UDim2.new(0.4, 0, 1, 0)
            SliderButton.Position = UDim2.new(0.6, 0, 0, 0)
            SliderButton.Text = "Adjust"
            SliderButton.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            SliderButton.TextColor3 = Color3.fromRGB(255, 255, 255)

            local sliderValue = default
            SliderButton.MouseButton1Click:Connect(function()
                sliderValue = math.clamp(sliderValue + 1, min, max)
                SliderLabel.Text = text .. ": " .. sliderValue
                callback(sliderValue)
            end)
        end

        function Tab:AddTextbox(text, callback)
            local TextBox = Instance.new("TextBox")
            TextBox.Parent = TabFrame
            TextBox.Size = UDim2.new(1, 0, 0, 40)
            TextBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            TextBox.TextColor3 = Color3.fromRGB(255, 255, 255)
            TextBox.Text = text
            TextBox.Font = Enum.Font.GothamBold
            TextBox.TextSize = 16
            TextBox.ClearTextOnFocus = false

            TextBox.FocusLost:Connect(function()
                callback(TextBox.Text)
            end)
        end

        return Tab
    end

    return Library
end

return kijb
